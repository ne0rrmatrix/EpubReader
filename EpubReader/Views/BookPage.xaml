<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EpubReader.Views.BookPage"
             xmlns:local="clr-namespace:EpubReader.Views"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:viewModels="clr-namespace:EpubReader.ViewModels;assembly=EpubReader"
             x:DataType="viewModels:BookViewModel"
             x:Name="CurrentPage"
             Shell.NavBarIsVisible="{Binding IsNavMenuVisible}"
             Loaded="ContentPage_Loaded">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <WebView Grid.Row="0" x:Name="EpubText" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" Navigating="EpubText_Navigating">
            <WebView.Behaviors>
                <toolkit:TouchBehavior 
                    BindingContext="{Binding Source={x:Reference CurrentPage}, Path=BindingContext, x:DataType=ContentPage}"
                    LongPressCommand="{Binding LongPressCommand}"/>
            </WebView.Behaviors>
        </WebView>
        <StackLayout IsVisible="{Binding IsNavMenuVisible}" HorizontalOptions="Center" Grid.Row="1" Spacing="50" Orientation="Horizontal" Padding="10,10,10,10">
            <ImageButton Source="arrow_back.png" Clicked="Button_Previous" WidthRequest="40"/>
            <Label x:Name="ChapterLabel" FontSize="20" HorizontalOptions="Center"/>
            <ImageButton Source="arrow_forward.png" Clicked="Button_Next" WidthRequest="40"/>
        </StackLayout>
    </Grid>
</ContentPage>